local terminal = require("ugaterm.terminal").new()

local function num_win()
  return vim.fn.winnr("$")
end

describe("Test for terminal", function()
  it("open/hide", function()
    assert.equals(1, num_win())
    terminal:open()
    assert.equals(2, num_win())
    terminal:hide()
    assert.equals(1, num_win())
  end)

  it("toggle", function()
    assert.equals(1, num_win())
    terminal:toggle()
    assert.equals(2, num_win())
    terminal:toggle()
    assert.equals(1, num_win())
  end)

  it("new_open", function()
    terminal:open()
    assert.equals("terminal://1", vim.api.nvim_buf_get_name(0))
    terminal:new_open()
    assert.equals("terminal://2", vim.api.nvim_buf_get_name(0))
    terminal:hide()
  end)

  it("delete", function()
    terminal:open()
    assert.equals("terminal://2", vim.api.nvim_buf_get_name(0))
    terminal:delete()
    assert.equals("terminal://1", vim.api.nvim_buf_get_name(0))
    terminal:hide()
  end)
end)
